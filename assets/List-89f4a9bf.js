import{a as D,b,o as w,c as E,w as l,f as o,h as p,l as k,m as x,j as h,n as S,s as U,C as T,_ as A,r as c,x as F,g as C,y as $,v as L,A as N,D as R,F as v,B as M}from"./index-09eaad1e.js";/* empty css                   *//* empty css               *//* empty css                  *//* empty css                 */import{d as y}from"./database-34f12082.js";import{u as I}from"./index-3e9592b5.js";const z=D({__name:"AddContests",setup(n){const e=b({title:"",season:"",type:""}),m=()=>{var s;(async()=>{const{title:t,season:a,type:i}=e,{data:f,error:u}=await U.from("Contests").insert([{title:t,season:a,type:i}]).select();if(u){console.error("Error submitting a new data to the database:",u);return}else console.log("A new data submitted!");return f})(),(s=B.methods)==null||s.whenCreated()};return(d,s)=>{const t=k,a=x,i=h,f=S;return w(),E(f,{model:e,"label-width":"auto",style:{"max-width":"600px"}},{default:l(()=>[o(a,{label:"Title"},{default:l(()=>[o(t,{placeholder:"往事探险",modelValue:e.title,"onUpdate:modelValue":s[0]||(s[0]=u=>e.title=u)},null,8,["modelValue"])]),_:1}),o(a,{label:"Season"},{default:l(()=>[o(t,{placeholder:"e.g. 2024-2025",modelValue:e.season,"onUpdate:modelValue":s[1]||(s[1]=u=>e.season=u)},null,8,["modelValue"])]),_:1}),o(a,{label:"Type"},{default:l(()=>[o(t,{placeholder:"e.g.: Engineering",modelValue:e.type,"onUpdate:modelValue":s[2]||(s[2]=u=>e.type=u)},null,8,["modelValue"])]),_:1}),o(a,null,{default:l(()=>[o(i,{type:"primary",onClick:m},{default:l(()=>s[3]||(s[3]=[p("Create")])),_:1})]),_:1})]),_:1},8,["model"])}}}),g=I(),O={name:"EditContests",setup(){const n=b({title:"",season:"",type:""}),e=b([]);T(async()=>{await m()});async function m(){const{data:s,error:t}=await y.methods.getContestByID(g.chosenContestIDForEdit);t?console.error("Error fetching contests:",t):(e.push(...s||[]),e.length>0&&(n.title=e[0].title||"",n.season=e[0].season||"",n.type=e[0].type||""))}return{form:n,contestRow:e,whenCreated:m,onSubmit:()=>{var t;(async()=>{const{data:a,error:i}=await y.methods.editContestRow(g.chosenContestIDForEdit,n.title,n.season,n.type);return a})(),(t=B.methods)==null||t.whenCreated()}}}};function j(n,e,m,d,s,t){const a=k,i=x,f=h,u=S;return w(),E(u,{model:d.form,"label-width":"auto",style:{"max-width":"600px"}},{default:l(()=>[o(i,{label:"Title"},{default:l(()=>[o(a,{modelValue:d.form.title,"onUpdate:modelValue":e[0]||(e[0]=r=>d.form.title=r)},null,8,["modelValue"])]),_:1}),o(i,{label:"Season"},{default:l(()=>[o(a,{modelValue:d.form.season,"onUpdate:modelValue":e[1]||(e[1]=r=>d.form.season=r)},null,8,["modelValue"])]),_:1}),o(i,{label:"Type"},{default:l(()=>[o(a,{modelValue:d.form.type,"onUpdate:modelValue":e[2]||(e[2]=r=>d.form.type=r)},null,8,["modelValue"])]),_:1}),o(i,null,{default:l(()=>[o(f,{type:"primary",onClick:d.onSubmit},{default:l(()=>e[3]||(e[3]=[p("Update")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])}const q=A(O,[["render",j]]),G={class:"about"},H={style:{"padding-bottom":"15px"}},_=I();c(!1);c(!1);const J=c(!1),K={name:"ContestsList",data(){return{Contests:[]}},async created(){this.whenCreated()},methods:{async whenCreated(){const{data:n,error:e}=await y.methods.getContests();console.log(n),e?console.error("Error fetching contests:",e):this.Contests=n||[]},async deleteRow(n){console.log(n);const{error:e}=await y.methods.deleteByID("Contests",n);e?console.error("Error deleting the selected data:",e):console.log("Successfully delete the item from table.")},chooseContest(n){const e=this.Contests[n].id;_.setContestIDNextLevel(e),$.push({name:"parentCriteriaList"}),console.log("Set contest ID to "+e),console.log("Successfully choose the given contest and route.")},async handleEdit(n){const e=this.Contests[n].id;_.setContestIDEdit(e)},confirmDelete(){L.confirm("Are you confirm to delete this contest? Once deleted, all related criteria/scores will be deleted, and there's no way recovering the data.").then(()=>{this.deleteRow(_.chosenContestIDForDelete),this.whenCreated(),J.value=!1}).catch(()=>{})},handleDeleteButton(n){_.setChosenContestIDForDelete(this.Contests[n].id)}}},B=D({...K,setup(n){const e=c(!1),m=c(!1),d=c(!1);return(s,t)=>{const a=h,i=M,f=N,u=R;return w(),F("div",G,[t[12]||(t[12]=C("div",{class:"header"},[C("h1",null,"List of Contests")],-1)),C("div",H,[o(a,{type:"primary",onClick:t[0]||(t[0]=r=>e.value=!0)},{default:l(()=>t[5]||(t[5]=[p("Add a new contest")])),_:1})]),o(f,{data:s.Contests,stripe:"",border:"",style:{width:"100%"}},{default:l(()=>[o(i,{fixed:"",prop:"title",label:"Title",width:"180"}),o(i,{prop:"season",label:"Season",width:"180"}),o(i,{prop:"type",label:"Type",width:"180"}),o(i,{fixed:"right",label:"Operations",width:"180"},{default:l(r=>[o(a,{link:"",type:"primary",size:"small",onClick:v(V=>(s.handleEdit(r.$index),m.value=!0),["prevent"])},{default:l(()=>t[6]||(t[6]=[p("Edit")])),_:2},1032,["onClick"]),o(a,{link:"",type:"danger",size:"small",onClick:V=>{s.handleDeleteButton(r.$index),d.value=!0}},{default:l(()=>t[7]||(t[7]=[p("Delete")])),_:2},1032,["onClick"]),o(a,{link:"",type:"info",onClick:v(V=>s.chooseContest(r.$index),["prevent"])},{default:l(()=>t[8]||(t[8]=[p("Choose")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(u,{modelValue:e.value,"onUpdate:modelValue":t[1]||(t[1]=r=>e.value=r),title:"Add a new contest"},{default:l(()=>[o(z)]),_:1},8,["modelValue"]),o(u,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=r=>m.value=r),title:"Edit the chosen contest"},{default:l(()=>[o(q)]),_:1},8,["modelValue"]),o(u,{modelValue:d.value,"onUpdate:modelValue":t[4]||(t[4]=r=>d.value=r),title:"Delete the chosen contest"},{default:l(()=>[t[11]||(t[11]=C("div",{style:{"margin-bottom":"30px"}}," Are you sure to delete the chosen contest? ",-1)),o(a,{onClick:t[3]||(t[3]=r=>d.value=!1)},{default:l(()=>t[9]||(t[9]=[p("Cancel")])),_:1}),o(a,{type:"primary",onClick:s.confirmDelete},{default:l(()=>t[10]||(t[10]=[p("Confirm")])),_:1},8,["onClick"])]),_:1},8,["modelValue"])])}}});export{B as default};
