import{a as B,r as I,b as w,c as g,w as l,u as R,e as V,E as T,o as v,f as o,g as d,h as x,i as E,s as Y,v as M,j as N,k as P,l as j,m as D,n as L,p as $,t as q,q as z,_ as G}from"./index-09eaad1e.js";/* empty css                *//* empty css                 *//* empty css                  */import{v as m,a as K,b as O,u as k}from"./signup-83e84d0c.js";const h={class:"card-header"},A=B({__name:"Signup",setup(H){const y=I(),b=R(),a=w({username:"",email:"",password:"",token:""}),U=w({username:[{validator:m,trigger:"blur"}],email:[{validator:m,trigger:"blur"},{validator:K,trigger:"blur"}],password:[{validator:m,trigger:"blur"}],token:[{validator:m,trigger:"blur"},{validator:O,trigger:"blur"}]}),S=async p=>{p&&p.validate(async e=>{if(e){const{username:n,email:_,password:c,token:f}=a;let r="";for(let u in k)f==k[u]&&(r=k[u]);const{data:s,error:i}=await Y.from("Users").insert([{role:r,username:n,email:_,password:c}]).select();if(console.log(s),i){console.error("Sign up failed:",i.message);return}M.alert("Please go and check your email for verification and then log in.","Title",{confirmButtonText:"OK"}),b.push({name:"login"})}else{console.log("error submit!");return}})},C=()=>{b.push("/login")};return(p,e)=>{const n=N,_=V("Moon"),c=V("Sunny"),f=P,r=j,s=D,i=L,u=$,F=T;return v(),g(F,{class:"login",justify:"center",align:"middle"},{default:l(()=>[o(u,{class:"box-card"},{header:l(()=>[d("div",h,[e[7]||(e[7]=d("span",null,"Sign Up",-1)),o(n,{type:"primary",class:"signup",onClick:C},{default:l(()=>e[6]||(e[6]=[x("Go Log In")])),_:1}),d("div",{class:"dark-icon",onClick:e[0]||(e[0]=t=>E(q)())},[o(f,null,{default:l(()=>[E(z)?(v(),g(_,{key:0})):(v(),g(c,{key:1}))]),_:1})])])]),default:l(()=>[d("div",null,[o(i,{ref_key:"ruleFormRef",ref:y,model:a,"status-icon":"",rules:U,"label-width":"60px",class:"demo-ruleForm"},{default:l(()=>[o(s,{label:"Username",prop:"username"},{default:l(()=>[o(r,{placeholder:"Your username",modelValue:a.username,"onUpdate:modelValue":e[1]||(e[1]=t=>a.username=t)},null,8,["modelValue"])]),_:1}),o(s,{label:"Email",prop:"email"},{default:l(()=>[o(r,{placeholder:"Your email",type:"email",modelValue:a.email,"onUpdate:modelValue":e[2]||(e[2]=t=>a.email=t)},null,8,["modelValue"])]),_:1}),o(s,{label:"Password",prop:"password"},{default:l(()=>[o(r,{placeholder:"Your password",modelValue:a.password,"onUpdate:modelValue":e[3]||(e[3]=t=>a.password=t),type:"password",autocomplete:"off","show-password":""},null,8,["modelValue"])]),_:1}),o(s,{label:"Token",prop:"token"},{default:l(()=>[o(r,{autosize:{minRows:1,maxRows:3},type:"textarea",placeholder:"Please enter the token provided by the administrator in order to register. Your token will determine your user role.",modelValue:a.token,"onUpdate:modelValue":e[4]||(e[4]=t=>a.token=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(s,null,{default:l(()=>[o(n,{type:"primary",onClick:e[5]||(e[5]=t=>S(y.value))},{default:l(()=>e[8]||(e[8]=[x("Sign Up")])),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1})]),_:1})}}});const ee=G(A,[["__scopeId","data-v-12ea0df9"]]);export{ee as default};
