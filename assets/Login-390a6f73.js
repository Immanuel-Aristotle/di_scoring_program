import{d as L,u as I,r as R,a as y,c as m,w as o,b as D,e as v,E as K,o as c,f as t,g as n,h as k,i as b,t as M,j as N,k as _,l as O,m as P,n as Y,p as j,q as $,s as q,_ as A}from"./index-d7709c43.js";/* empty css                *//* empty css                     *//* empty css                 *//* empty css                  */import{d as x}from"./database-348ccfc6.js";import{s as z}from"./signup-43faf39c.js";const G={class:"card-header"},H=L({__name:"Login",setup(J){const E=I(),f=R(),i=D(),{validateEmail:V,validateEmpty:g}=z,s=y({email:"",password:""}),h=y({email:[{validator:g,trigger:"blur"},{validator:V,trigger:"blur"}],password:[{validator:g,trigger:"blur"}]}),B=async d=>{d&&d.validate(async e=>{if(e){const{email:l,password:u}=s;if(await!x.methods.checkEmailDuplicate(l)){_.alert("The email is not registered, please sign up first.",{confirmButtonText:"OK"});return}const a=await x.methods.getPassword(l);a.data&&a.data[0]&&a.data[0].password===u?(E.storeUser(a.data[0]),_.alert("Login successfully! You are now redirected to the home page.",{confirmButtonText:"OK"}),i.push("/")):_.alert("The password is incorrect. Please try again.",{confirmButtonText:"OK"}),i.push("/")}else{console.log("error submit!");return}})},C=()=>{i.push("/signup")};return(d,e)=>{const l=O,u=v("Moon"),a=v("Sunny"),F=P,w=Y,p=j,S=$,T=q,U=K;return c(),m(U,{class:"login",justify:"center",align:"middle"},{default:o(()=>[t(T,{class:"box-card"},{header:o(()=>[n("div",G,[e[5]||(e[5]=n("span",null,"Authenticate",-1)),t(l,{type:"primary",class:"signup",onClick:C},{default:o(()=>e[4]||(e[4]=[k("Sign Up")])),_:1}),n("div",{class:"dark-icon",onClick:e[0]||(e[0]=r=>b(M)())},[t(F,null,{default:o(()=>[b(N)?(c(),m(u,{key:0})):(c(),m(a,{key:1}))]),_:1})])])]),default:o(()=>[n("div",null,[t(S,{ref_key:"ruleFormRef",ref:f,model:s,"status-icon":"",rules:h,"label-width":"60px",class:"demo-ruleForm"},{default:o(()=>[t(p,{label:"Email",prop:"email"},{default:o(()=>[t(w,{placeholder:"Your email",type:"email",modelValue:s.email,"onUpdate:modelValue":e[1]||(e[1]=r=>s.email=r)},null,8,["modelValue"])]),_:1}),t(p,{label:"Password",prop:"password"},{default:o(()=>[t(w,{placeholder:"Your password",modelValue:s.password,"onUpdate:modelValue":e[2]||(e[2]=r=>s.password=r),type:"password",autocomplete:"off","show-password":""},null,8,["modelValue"])]),_:1}),t(p,null,{default:o(()=>[t(l,{type:"primary",onClick:e[3]||(e[3]=r=>B(f.value))},{default:o(()=>e[6]||(e[6]=[k("Log in")])),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1})]),_:1})}}});const se=A(H,[["__scopeId","data-v-e6eacdde"]]);export{se as default};
