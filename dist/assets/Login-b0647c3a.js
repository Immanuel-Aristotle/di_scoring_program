import{d as L,r as B,a as y,c as p,w as s,u as R,b as w,E as N,o as _,e as t,f as d,g as E,h as V,s as T,i as $,j as h,k as j,l as z,m as A,n as D,t as M,p as Z,_ as P}from"./index-0862b214.js";/* empty css                *//* empty css                 *//* empty css                  */import{u as W}from"./user-86895aed.js";const q={class:"card-header"},G=L({__name:"Login",setup(H){const c=W(),f=B(),g=R(),b=(n,e,o)=>{e===""?o(new Error("The value should not be empty.")):o()},k=(n,e,o)=>{String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?o():o(new Error("The email is not valid"))},l=y({email:"",password:""}),x=y({email:[{validator:k,trigger:"blur"}],password:[{validator:b,trigger:"blur"}]}),C=async n=>{n&&n.validate(async e=>{if(e){const{email:o,password:r}=l,{data:i,error:u}=await T.auth.signInWithPassword({email:o,password:r});if(u){console.error("Login failed:",u.message);return}console.log("User logged in:",i.user),c.setUser(i.user),console.log(c.user),g.push("/")}else{console.log("error submit!");return}})},U=()=>{g.push("/signup")};return(n,e)=>{const o=$,r=w("Moon"),i=w("Sunny"),u=h,v=j,m=z,F=A,S=D,I=N;return _(),p(I,{class:"login",justify:"center",align:"middle"},{default:s(()=>[t(S,{class:"box-card"},{header:s(()=>[d("div",q,[e[5]||(e[5]=d("span",null,"用户登录",-1)),t(o,{type:"primary",class:"signup",onClick:U},{default:s(()=>e[4]||(e[4]=[E("Sign Up")])),_:1}),d("div",{class:"dark-icon",onClick:e[0]||(e[0]=a=>V(M)())},[t(u,null,{default:s(()=>[V(Z)?(_(),p(r,{key:0})):(_(),p(i,{key:1}))]),_:1})])])]),default:s(()=>[d("div",null,[t(F,{ref_key:"ruleFormRef",ref:f,model:l,"status-icon":"",rules:x,"label-width":"60px",class:"demo-ruleForm"},{default:s(()=>[t(m,{label:"邮箱",prop:"email"},{default:s(()=>[t(v,{type:"email",modelValue:l.email,"onUpdate:modelValue":e[1]||(e[1]=a=>l.email=a)},null,8,["modelValue"])]),_:1}),t(m,{label:"密码",prop:"password"},{default:s(()=>[t(v,{modelValue:l.password,"onUpdate:modelValue":e[2]||(e[2]=a=>l.password=a),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(m,null,{default:s(()=>[t(o,{type:"primary",onClick:e[3]||(e[3]=a=>C(f.value))},{default:s(()=>e[6]||(e[6]=[E("登录")])),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1})]),_:1})}}});const Y=P(G,[["__scopeId","data-v-a6830233"]]);export{Y as default};
